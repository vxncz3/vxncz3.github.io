<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Wplace Pixel Timer</title>
  <link rel="stylesheet" href="styles.css">
  <link href="https://fonts.googleapis.com/css2?family=Pixelify+Sans:wght@400..700&family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
</head>
<body>
  <div class="container">
    <a href="https://wplace.live" target="_blank" class="top-block">
      <img src="wplacelogo.png" alt="Logo" class="pixel-image">
      <div class="top-text">
        <p>wplace</p>
      </div>
    </a>

    <div class="main-text">
      <h1>Pixel Timer</h1>
      <p>Check how long it takes to fully reload your pixels so you can place them before reaching the limit.</p>
    </div>

    <input type="number" id="currentPixels" placeholder="Enter your current amount of paint charges" min="0">
    <input type="number" id="pixels" placeholder="Enter your maximum paint charges capacity" min="1">
    <button onclick="calculer()" disabled>Calculate</button>
    <div id="result"></div>

    <footer>
      &copy; 2025 vxncz3. All rights reserved.<br>Not affiliated with Wplace.
    </footer>
  </div>

<script>
const pixelsInput = document.getElementById("pixels");
const currentPixelsInput = document.getElementById("currentPixels");
const calculateBtn = document.querySelector("button");
const resultDiv = document.getElementById("result");

// load
window.addEventListener('DOMContentLoaded', () => {
  if (localStorage.getItem("pixels")) pixelsInput.value = localStorage.getItem("pixels");
  if (localStorage.getItem("currentPixels")) currentPixelsInput.value = localStorage.getItem("currentPixels");
  checkInputs();
});

// save
[pixelsInput, currentPixelsInput].forEach(input => {
  input.addEventListener("input", () => {
    localStorage.setItem(input.id, input.value);
    checkInputs();
  });
});

// check grisage btn
function checkInputs() {
  const totalPixels = Number(pixelsInput.value);
  const currentPixels = Number(currentPixelsInput.value) || 0;

  if (totalPixels > 0 && currentPixels >= 0 && currentPixels <= totalPixels) {
    calculateBtn.disabled = false;
    calculateBtn.style.opacity = "1";
    calculateBtn.style.cursor = "pointer";
  } else {
    calculateBtn.disabled = true;
    calculateBtn.style.opacity = "0.5";
    calculateBtn.style.cursor = "not-allowed";
  }
}

// calcul temps
function calculer() {
  const totalPixels = Number(pixelsInput.value);
  const currentPixels = Number(currentPixelsInput.value) || 0;

  const pixelsLeft = totalPixels - currentPixels;
  const totalSeconds = pixelsLeft * 30;
  const hours = Math.floor(totalSeconds / 3600);
  const minutes = Math.floor((totalSeconds % 3600) / 60);

  resultDiv.innerHTML = `Your pixels amount will be maxed out in <b>${hours}h ${minutes}m.</b>`;
  resultDiv.classList.add('show-result');
}
</script>
</body>
</html>
